<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Docker Workshop - Dockerize</title>

    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/node_modules/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../style.css">

    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#navigation').load('../navbar.html');

            $('.task').each(function() {
                var $id = $(this).attr("id");
                var dataElem = {"task": $id};
                $.ajax({
                    url: '/check',
                    data: {
                        task: $id
                    }
                }).done(function(data) {
                    if(data === "korrekt") {
                        $('#' + $id).append('<span class="fa fa-check-circle"></span>');
                    } else {
                        $('#' + $id).append('<span class="fa fa-times-circle">'+data+'</span>');
                    }
                }).fail(function(error) {
                    console.log("Failure while retrieving task progression: " + error);
                });
            });
        });
    </script>
</head>
<body>

<div class="nav-container">
    <div id="navigation"></div>
</div>

<div class="container">
    <h1>Dockerize</h1>
    <p>
        Neste steg er å kunne lage og kjøre docker-containere som inneholder egenproduserte applikasjoner.

        Oppgaven er her å bygge og kjøre denne applikasjonen (DockerClient) i en Docker container.
        Denne containeren skal legge til JAR-filen som lages av Maven, og kjøre denne jar-filen
        ved oppstart av containeren.
    </p>

    <h2>a)</h2>
    <p>
        Vi har en enkel Java-applikasjon, som er konfigurert med maven i pom.xml. Denne kan bygges med kommandoen 'mvn clean install',
        som lager en JAR-fil av applikasjonen. Denne JAR-filen kan så kjøres med java -jar &ltpath-til-JAR&gt.
    </p>

    <h2>b)</h2>
    <p>
        Det er flere måter å lage containere av applikasjoner på, der den aller enkleste metoden er å simpelten legge til
        en allerede bygget applikasjon.

        Bygg en JAR-fil av DockerClient med kommandoen &ltmvn clean install&gt. Endre Dockerfile slike at den legger til
        JAR-filen, og eksekverer jar-filen ved oppstart. Bygg og kjør så docker containeren på samme måte som i forrige oppgave.
    </p>

    <h2>c)</h2>
    <p>
        Istedenfor å manuelt bygge docker imaget på nytt hver gang Maven har kjørt, kan vi få Maven til å bygge
        det automatisk. Pluginen maven-docker-plugin er allerede lagt til i pom.xml, det eneste som mangler er å konfigurere
        den med korrekt path til Dockerfile, og navn for imaget som skal lages!

        docker containeren fra Dockerfilen spesifisert i plugin-konfigurasjonen. Med dette utfylt kan maven-docker-plugin
        bygge imaget med kommandoen &ltmvn clean package docker:build&gt.
    </p>

    <div id="fremgang">
        <h2>Fremgang</h2>
        <div id="3a" class="task">a) </div>
        <div id="3b" class="task">b) </div>
        <div id="3c" class="task">c) </div>
    </div>

    <h2>Nyttige lenker</h2>
    <ul>
        <li>Link til maven-doc</li>
        <li><a href="https://docs.docker.com/engine/userguide/containers/dockerimages/">Docker Docs - Images</a></li>
        <li><a href="https://github.com/spotify/docker-maven-plugin">Docker-maven-plugin</a></li>
        <li>Todo: link forklaring av jar, maven.</li>
    </ul>

</div>


</body>
</html>