<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Docker Workshop - Modifiser Docker</title>

    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/node_modules/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../style.css">

    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            $('#navigation').load('../navbar.html');

         /*   $('.task').each(function() {
                var $id = $(this).attr("id");
                var dataElem = {"task": $id};
                $.ajax({
                    url: '/check',
                    data: {
                        task: $id
                    }
                }).done(function(data) {
                    if(data === "korrekt") {
                        $('#' + $id).append('<span class="fa fa-check-circle"></span>');
                    } else {
                        $('#' + $id).append('<span class="fa fa-times-circle">'+data+'</span>');
                    }
                });
            });*/
        });
    </script>
</head>

<body>

<div class="nav-container">
    <div id="navigation" ></div>
</div>

<div class="container">
    <h1>Modifisering av Dockerfile</h1>
    <p>
        Til nå har vi bare brukt en veldig enkel dockerfil, som baserer seg på et eksisterende image,
        legger til en fil og deretter kjører denne ved oppstart. Det er mye mer man kan gjøre ved opprettelsen
        av images, og i denne oppgaven skal vi se på noen av dem.
    </p>
    <p>
        Hva som skal være inkludert i vårt ferdige docker-image kan styres ved å forandre hvilket image vi baserer oss på.
        Hittil har vi basert dockerfilen vår på <a href="https://hub.docker.com/_/alpine/">Alpine</a>, som er en ekstremt
        nedstrippet linux-versjon. Dette har fordelen at vi får små containere, men den mangler noen grunnleggende ting,
        som for eksempel Bash og Java.
    </p>

    <h2>a)</h2>
    <p>
        Endre Dockerfile slik at den legger til scriptet "hei.sh", og kjører dette ved oppstart. Observer at dette feiler,
        ettersom programmet bash ikke finnes i imaget vi baserer oss på.
    </p>

    <h2>b)</h2>
    <p>
        Bruk Dockers søke-kommando for å finne det offisielle ubuntu-imaget, som inneholder bash, og endre din Dockerfile
        slik at den baserer seg på den nyeste versjonen av dette. Bygg og kjør fra Dockerfile på nytt, og observer at
        containeren nå har tilgang på bash-programmet, og at scriptet blir kjørt når containeren starter opp!
    </p>

    <h2>c)</h2>
    <p>
        Det er også mulig å modifisere imaget ved å installere ekstra pakker. Bruk Ubuntus package manager APT via RUN-kommandoen
        i Dockerfile til å installere pakken "curl". Denne blir da installert under byggingen av imaget, og vil være
        tilgjengelig når containeren startes. Endre også Dockerfilen slik at den kjører &ltcurl -L www.google.com&gt
        ved oppstart.

        <b>NB: dersom docker har problemer med tilkobling til repositories kan det hjelpe å skru av VPN.</b>
    </p>

    <div id="fremgang">
        <h2>Fremgang</h2>
        <div id="2a" class="task">a) </div>
        <div id="2b" class="task">b) </div>
        <div id="2c" class="task">c) </div>
    </div>

    <h2>Nyttige lenker</h2>
    <ul>
        <li><a href="https://docs.docker.com/engine/userguide/containers/dockerimages/">Docker Docs - Images</a></li>
        <li><a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/">Dockerfile Best Practices</a></li>
        <li><a href="https://help.ubuntu.com/community/AptGet/Howto">AptGet HowTo</a></li>
    </ul>

</div>

</body>
</html>